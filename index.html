<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Another Chess - Enhanced Chess Game</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>â™”</text></svg>">
    <!-- Chess.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <meta name="description" content="Enhanced chess game with advanced AI, drag & drop, beautiful themes, and comprehensive features">
    <meta name="keywords" content="chess, game, AI, drag and drop, online chess, chess engine">
    <meta name="author" content="Another Chess">
    <meta name="theme-color" content="#667eea">
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Another Chess - Enhanced Chess Game">
    <meta property="og:description" content="Play chess with advanced AI, beautiful themes, and enhanced features">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://eladser.github.io/another_chess/">
    <meta property="og:image" content="https://eladser.github.io/another_chess/chess-preview.png">
    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Another Chess - Enhanced Chess Game">
    <meta name="twitter:description" content="Play chess with advanced AI, beautiful themes, and enhanced features">
    <meta name="twitter:image" content="https://eladser.github.io/another_chess/chess-preview.png">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">â™” Another Chess</h1>
            <div class="game-controls">
                <button id="newGameBtn" class="btn btn-primary" title="Start a new game (Ctrl+N)">ğŸ® New Game</button>
                <button id="flipBoardBtn" class="btn btn-secondary" title="Flip the board (Ctrl+F)">ğŸ”„ Flip Board</button>
                <button id="undoBtn" class="btn btn-secondary" title="Undo last move (Ctrl+U)">â†©ï¸ Undo</button>
                <button id="settingsBtn" class="btn btn-secondary" title="Open settings (Ctrl+S)">âš™ï¸ Settings</button>
                <button id="helpBtn" class="btn btn-secondary" title="Show help (H or ?)">â“ Help</button>
            </div>
        </header>

        <main class="game-area">
            <div class="game-info">
                <div class="player-info">
                    <div class="player" id="topPlayer">
                        <div class="player-header">
                            <div class="player-name">ğŸ¤– AI Opponent</div>
                            <div class="player-rating">â­ <span id="aiRating">1400</span></div>
                        </div>
                        <div class="captured-pieces" id="topCaptured"></div>
                        <div class="player-time" id="topTime">â±ï¸ âˆ</div>
                    </div>
                </div>
                
                <div class="chess-board-container">
                    <div class="board-wrapper">
                        <div class="coordinates coordinates-left" id="leftCoords">
                            <div class="coord">8</div>
                            <div class="coord">7</div>
                            <div class="coord">6</div>
                            <div class="coord">5</div>
                            <div class="coord">4</div>
                            <div class="coord">3</div>
                            <div class="coord">2</div>
                            <div class="coord">1</div>
                        </div>
                        <div class="board-area">
                            <div id="chessBoard" class="chess-board board-theme-classic" role="grid" aria-label="Chess board"></div>
                            <div class="coordinates coordinates-bottom" id="bottomCoords">
                                <div class="coord">a</div>
                                <div class="coord">b</div>
                                <div class="coord">c</div>
                                <div class="coord">d</div>
                                <div class="coord">e</div>
                                <div class="coord">f</div>
                                <div class="coord">g</div>
                                <div class="coord">h</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="game-info">
                    <div class="player-info">
                        <div class="player" id="bottomPlayer">
                            <div class="player-header">
                                <div class="player-name">ğŸ‘¤ You</div>
                                <div class="player-rating">â­ <span id="playerRating">1200</span></div>
                            </div>
                            <div class="captured-pieces" id="bottomCaptured"></div>
                            <div class="player-time" id="bottomTime">â±ï¸ âˆ</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="game-sidebar">
                <div class="game-status">
                    <div class="status-item">
                        <span class="status-label">Turn:</span>
                        <span id="currentTurn" class="status-value">âšª White</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Mode:</span>
                        <span id="gameMode" class="status-value">ğŸ¤– vs AI</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Difficulty:</span>
                        <span id="difficulty" class="status-value">ğŸ¯ Medium</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Time:</span>
                        <span id="gameTime" class="status-value">â±ï¸ 0:00</span>
                    </div>
                </div>

                <div class="game-statistics">
                    <h3>ğŸ“Š Game Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Moves:</span>
                            <span id="totalMoves" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Captures:</span>
                            <span id="captures" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Checks:</span>
                            <span id="checks" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Accuracy:</span>
                            <span id="accuracy" class="stat-value">--</span>
                        </div>
                    </div>
                </div>

                <div class="engine-analysis">
                    <h3>ğŸ”¬ Engine Analysis</h3>
                    <div class="analysis-bar">
                        <div class="eval-bar" id="evalBar"></div>
                        <div class="eval-text" id="evalText">+0.0</div>
                    </div>
                    <div class="best-move" id="bestMove">âœ… Ready</div>
                </div>

                <div class="move-history">
                    <h3>ğŸ“œ Move History</h3>
                    <div id="moveList" class="move-list" role="log" aria-label="Move history"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" role="dialog" aria-labelledby="settingsTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="settingsTitle">âš™ï¸ Settings</h2>
                <button class="close-btn" id="closeSettings" aria-label="Close settings">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>ğŸ® Game Settings</h3>
                    <div class="setting-item">
                        <label for="difficultySelect">AI Difficulty:</label>
                        <select id="difficultySelect" aria-describedby="difficultyHelp">
                            <option value="easy">ğŸŸ¢ Easy (900 ELO)</option>
                            <option value="medium" selected>ğŸŸ¡ Medium (1400 ELO)</option>
                            <option value="hard">ğŸ”´ Hard (1800 ELO)</option>
                            <option value="expert">âš« Expert (2200 ELO)</option>
                        </select>
                        <small id="difficultyHelp">Choose AI opponent strength</small>
                    </div>
                    <div class="setting-item">
                        <label for="playerColorSelect">Play as:</label>
                        <select id="playerColorSelect">
                            <option value="white" selected>âšª White</option>
                            <option value="black">âš« Black</option>
                            <option value="random">ğŸ² Random</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="boardThemeSelect">Board Theme:</label>
                        <select id="boardThemeSelect">
                            <option value="classic" selected>ğŸ›ï¸ Classic</option>
                            <option value="wooden">ğŸªµ Wooden</option>
                            <option value="marble">ğŸ›ï¸ Marble</option>
                            <option value="glass">ğŸªŸ Glass</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>ğŸ¨ Display Settings</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showCoordinates" checked>
                            Show Coordinates (a-h, 1-8)
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="highlightLastMove" checked>
                            Highlight Last Move
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showPossibleMoves" checked>
                            Show Possible Moves
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enableAnimations" checked>
                            Enable Animations
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>ğŸ”Š Audio Settings</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enableSounds" checked>
                            Enable Sound Effects
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="volumeSlider">Volume:</label>
                        <input type="range" id="volumeSlider" min="0" max="100" value="50" aria-describedby="volumeValue">
                        <span id="volumeValue">50%</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveSettings" class="btn btn-primary">ğŸ’¾ Save Settings</button>
                <button id="resetSettings" class="btn btn-secondary">ğŸ”„ Reset to Default</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal" role="dialog" aria-labelledby="gameOverTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="gameOverTitle">ğŸ® Game Over</h2>
                <button class="close-btn" id="closeGameOver" aria-label="Close game over dialog">&times;</button>
            </div>
            <div class="modal-body">
                <div class="game-over-content">
                    <div class="game-result" id="gameResult">ğŸ‰ Result</div>
                    <p id="gameOverMessage">Game has ended!</p>
                    <div class="game-over-stats">
                        <div class="stat-item">
                            <span class="stat-label">Total Moves:</span>
                            <span id="finalMoves" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Game Time:</span>
                            <span id="finalTime" class="stat-value">0:00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Captures:</span>
                            <span id="finalCaptures" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Accuracy:</span>
                            <span id="finalAccuracy" class="stat-value">--</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="playAgainBtn" class="btn btn-primary">ğŸ® Play Again</button>
                <button id="analyzeGameBtn" class="btn btn-secondary">ğŸ” Analyze Game</button>
                <button id="exportGameBtn" class="btn btn-secondary">ğŸ“ Export PGN</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal" role="dialog" aria-labelledby="helpTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="helpTitle">â“ How to Play</h2>
                <button class="close-btn" id="closeHelp" aria-label="Close help dialog">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-content">
                    <h3>ğŸ¯ Objective</h3>
                    <p>The goal is to checkmate your opponent's king by attacking it in a way that it cannot escape capture.</p>
                    
                    <h3>ğŸ® Controls</h3>
                    <ul>
                        <li><strong>ğŸ–±ï¸ Click:</strong> Select a piece, then click destination square</li>
                        <li><strong>ğŸ–±ï¸ Drag & Drop:</strong> Drag pieces to move them (enhanced!)</li>
                        <li><strong>ğŸ–±ï¸ Right-click:</strong> Cancel current selection</li>
                        <li><strong>âŒ¨ï¸ Escape:</strong> Cancel current selection</li>
                        <li><strong>âŒ¨ï¸ Ctrl+U:</strong> Undo last move</li>
                        <li><strong>âŒ¨ï¸ Ctrl+N:</strong> New game</li>
                        <li><strong>âŒ¨ï¸ Ctrl+F:</strong> Flip board</li>
                        <li><strong>âŒ¨ï¸ Ctrl+S:</strong> Open settings</li>
                        <li><strong>âŒ¨ï¸ H or ?:</strong> Show this help</li>
                        <li><strong>âŒ¨ï¸ Arrow keys:</strong> Navigate move history</li>
                    </ul>
                    
                    <h3>âš¡ Special Moves</h3>
                    <ul>
                        <li><strong>ğŸ° Castling:</strong> Move king 2 squares toward rook</li>
                        <li><strong>ğŸ‘» En Passant:</strong> Capture pawn that just moved 2 squares</li>
                        <li><strong>ğŸ‘‘ Promotion:</strong> Pawn reaching end promotes to queen/rook/bishop/knight</li>
                    </ul>
                    
                    <h3>ğŸª Enhanced Features</h3>
                    <ul>
                        <li><strong>ğŸ¤– Smart AI:</strong> 4 difficulty levels with realistic play</li>
                        <li><strong>ğŸ” Analysis:</strong> Real-time position evaluation</li>
                        <li><strong>ğŸ¨ Themes:</strong> Multiple beautiful board themes</li>
                        <li><strong>ğŸ”Š Audio:</strong> Sound effects for moves and captures</li>
                        <li><strong>ğŸ“± Mobile:</strong> Fully responsive design with touch support</li>
                        <li><strong>ğŸ’¾ Export:</strong> Save games as PGN files</li>
                        <li><strong>ğŸ† Statistics:</strong> Track your progress</li>
                        <li><strong>ğŸ¯ Visual Effects:</strong> Enhanced animations and feedback</li>
                    </ul>
                    
                    <h3>ğŸ† Tips for Success</h3>
                    <ul>
                        <li><strong>ğŸ¯ Control the center:</strong> Place pieces on central squares</li>
                        <li><strong>ğŸ° Castle early:</strong> Keep your king safe</li>
                        <li><strong>ğŸ Develop pieces:</strong> Don't move the same piece twice</li>
                        <li><strong>ğŸª Think ahead:</strong> Consider your opponent's threats</li>
                        <li><strong>ğŸ“š Practice:</strong> Play regularly to improve</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeHelpBtn" class="btn btn-primary">âœ… Got it!</button>
            </div>
        </div>
    </div>

    <!-- Promotion Modal -->
    <div id="promotionModal" class="modal" role="dialog" aria-labelledby="promotionTitle" aria-modal="true">
        <div class="modal-content promotion-modal">
            <div class="modal-header">
                <h2 id="promotionTitle">ğŸ‘‘ Choose Promotion</h2>
            </div>
            <div class="modal-body">
                <div class="promotion-pieces">
                    <div class="promotion-piece" data-piece="q" title="Queen - Most powerful piece" role="button" tabindex="0">â™•</div>
                    <div class="promotion-piece" data-piece="r" title="Rook - Moves horizontally and vertically" role="button" tabindex="0">â™–</div>
                    <div class="promotion-piece" data-piece="b" title="Bishop - Moves diagonally" role="button" tabindex="0">â™—</div>
                    <div class="promotion-piece" data-piece="n" title="Knight - Moves in L-shape" role="button" tabindex="0">â™˜</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen" aria-live="polite">
        <div class="loading-content">
            <div class="loading-spinner" aria-hidden="true"></div>
            <div class="loading-text">ğŸ® Loading Enhanced Chess Engine...</div>
            <div class="loading-subtext">Preparing AI, board, and features...</div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notificationContainer" class="notification-container" aria-live="polite" aria-atomic="true"></div>

    <!-- Scripts -->
    <script src="chess-engine.js"></script>
    <script src="game.js"></script>
    <script src="board-enhancements.js"></script>
    
    <!-- Service Worker for offline support -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('âœ… SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('âŒ SW registration failed: ', registrationError);
                    });
            });
        }
    </script>

    <!-- Performance monitoring -->
    <script>
        // Basic performance monitoring
        window.addEventListener('load', () => {
            if ('performance' in window) {
                const loadTime = performance.now();
                console.log(`âš¡ Page loaded in ${loadTime.toFixed(2)}ms`);
                
                // Log timing metrics
                const timing = performance.getEntriesByType('navigation')[0];
                if (timing) {
                    console.log(`ğŸš€ DOM loaded in ${timing.domContentLoadedEventEnd - timing.domContentLoadedEventStart}ms`);
                }
            }
        });
    </script>
</body>
</html>